{"ast":null,"code":"var _jsxFileName = \"/Users/farisaziz/Desktop/Projecs/Throwdown_Site/throwdown_site/hooks/useAuth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n// Provider hook that creates an auth object and handles it's state\nimport { useState, useEffect, useContext, createContext } from \"react\";\nimport { app, auth } from \"../config/firebase\";\nimport { appendErrors } from \"react-hook-form\";\nvar authContext = /*#__PURE__*/createContext({\n  user: {}\n});\nvar Provider = authContext.Provider;\nexport function AuthProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n  var auth = useAuthProvider();\n  return __jsx(Provider, {\n    value: auth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 10\n    }\n  }, children);\n}\n\n_s(AuthProvider, \"U5QEqN6sgp/9Kus+ung4cQwYnRk=\", false, function () {\n  return [useAuthProvider];\n});\n\n_c = AuthProvider;\nexport var useAuth = function useAuth() {\n  _s2();\n\n  return useContext(authContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar useAuthProvider = function useAuthProvider() {\n  _s3();\n\n  var _useState = useState(null),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  if (app) {\n    app.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setUser(user);\n      }\n    });\n  }\n\n  var signIn = function signIn(email, password) {\n    return auth.signInWithEmailAndPassword(email, password).then(function (response) {\n      setUser(response.user);\n      return response.user;\n    })[\"catch\"](function (error) {\n      alert(error.message);\n    });\n  };\n\n  var signOut = function signOut() {\n    return auth.signOut().then(function () {\n      return setUser(false);\n    });\n  };\n\n  var signUp = function signUp(_ref2) {\n    var firstName = _ref2.firstName,\n        lastName = _ref2.lastName,\n        email = _ref2.email,\n        password = _ref2.password;\n    return auth.createUserWithEmailAndPassword(email, password).then(function (response) {\n      auth.currentUser.sendEmailVerification();\n      return setUser(response.user);\n    }).then(function () {\n      fetch(\"https://wod-with-faris-backend.herokuapp.com/user/create\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: email,\n          first_name: firstName,\n          last_name: lastName,\n          tokens: 0,\n          coach: false\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (resp) {\n        return console.log(resp);\n      });\n    })[\"catch\"](function (error) {\n      return {\n        error: error\n      };\n    });\n  };\n\n  return {\n    user: user,\n    signUp: signUp,\n    signIn: signIn,\n    signOut: signOut\n  };\n};\n\n_s3(useAuthProvider, \"Iei9RGtZU29Y1RhBe1sbfh/MntA=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/farisaziz/Desktop/Projecs/Throwdown_Site/throwdown_site/hooks/useAuth.js"],"names":["useState","useEffect","useContext","createContext","app","auth","appendErrors","authContext","user","Provider","AuthProvider","children","useAuthProvider","useAuth","setUser","onAuthStateChanged","signIn","email","password","signInWithEmailAndPassword","then","response","error","alert","message","signOut","signUp","firstName","lastName","createUserWithEmailAndPassword","currentUser","sendEmailVerification","fetch","method","headers","Accept","body","JSON","stringify","first_name","last_name","tokens","coach","resp","json","console","log"],"mappings":"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","sourcesContent":["// Provider hook that creates an auth object and handles it's state\nimport { useState, useEffect, useContext, createContext } from \"react\";\nimport { app, auth } from \"../config/firebase\";\nimport { appendErrors } from \"react-hook-form\";\n\nconst authContext = createContext({ user: {} });\nconst { Provider } = authContext;\n\nexport function AuthProvider({ children }) {\n  const auth = useAuthProvider();\n  return <Provider value={auth}>{children}</Provider>;\n}\nexport const useAuth = () => {\n  return useContext(authContext);\n};\n\nconst useAuthProvider = () => {\n  const [user, setUser] = useState(null);\n\n  if (app) {\n    app.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setUser(user);\n      }\n    });\n  }\n\n  const signIn = (email, password) => {\n    return auth\n      .signInWithEmailAndPassword(email, password)\n      .then((response) => {\n        setUser(response.user);\n        return response.user;\n      })\n      .catch((error) => {\n        alert(error.message);\n      });\n  };\n\n  const signOut = () => {\n    return auth.signOut().then(() => setUser(false));\n  };\n\n  const signUp = ({ firstName, lastName, email, password }) => {\n    return auth\n      .createUserWithEmailAndPassword(email, password)\n      .then((response) => {\n        auth.currentUser.sendEmailVerification();\n        return setUser(response.user);\n      })\n      .then(() => {\n        fetch(\"https://wod-with-faris-backend.herokuapp.com/user/create\", {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            email: email,\n            first_name: firstName,\n            last_name: lastName,\n            tokens: 0,\n            coach: false,\n          }),\n        })\n          .then((resp) => resp.json())\n          .then((resp) => console.log(resp));\n      })\n      .catch((error) => {\n        return { error };\n      });\n  };\n  return {\n    user,\n    signUp,\n    signIn,\n    signOut,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}